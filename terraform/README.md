# Blind Charging API Terraform

This directory contains the Terraform configuration to deploy the Blind Charging API on Azure.

## Quick start

Follow these steps to deploy the Blind Charging API.

### 1. Create Azure subscription

You will need the subscription ID for step (2), so first set this up through Azure.

### 2. Log in to Azure via the CLI

If you don't have the Azure CLI installed yet, [set that up](https://learn.microsoft.com/en-us/cli/azure/).

Then, log in with the tenant you used in step (1):

```
# If necessary, set the environment to use GovCloud.
 > az cloud set -n AzureUSGovernment
# Then complete the login flow.
 > az login
```

### 3. Set project variables

Make a new `<my-new-env>.tfvars` file with the relevant values.
(See `./vars.tf` for more information on the available options.)

### 4. Run Terraform

If you don't have the Terraform CLI installed yet, [set that up](https://developer.hashicorp.com/terraform/install).

First run:

```
terraform init
```

To initialize the Terraform environment. Then, to deploy the application, run:

```
terraform apply -var-file="<my-new-env>.tfvars"
```

### 5. Making subsequent updates / changes

You will generally not need to re-run the `init` command.

Keep the `.tfstate` file generated by the `apply` command for future use.
In subsequent `apply` runs, if you move or rename the state file, you can reuse it with the `-state="<my-state>.tfstate"` parameter.
